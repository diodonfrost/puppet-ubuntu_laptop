---
language: ruby
rvm: 2.4.1
services:
  - docker

env:
  - distribution: ubuntu
    version: "18.04"
    number: 1804
  - distribution: ubuntu
    version: "16.04"
    number: 1604

before_install:
  # Build docker container
  - 'sudo docker pull diodonfrost/${distribution}-${version}-puppet'

script:

  # Launch kitchen build, puppet apply and tests
  - 'kitchen test default-${distribution}-${number}-puppet'

  # Delete container
  - 'sudo docker rm -f ${distribution}-${version}-puppet'
